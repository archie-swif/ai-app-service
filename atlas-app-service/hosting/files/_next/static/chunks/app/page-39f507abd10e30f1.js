(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2324:function(e,t,n){Promise.resolve().then(n.bind(n,9302))},8149:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(7437),s=n(2265),o=JSON.parse('{"temperature":0.5,"model":"gpt-4"}'),c=n(5983);function r(e){let{request:t="",onResponse:n=()=>{},systemContext:r=[],userContext:i=[],openai:l,model:u,name:d,temperature:m}=e,[f,p]=(0,s.useState)(""),[h,g]=(0,s.useState)("Hello!"),[v,y]=(0,s.useState)(r);async function x(e){e.preventDefault(),N(f)}function N(e){e&&""!==e.trim()&&(p(""),g("..."),S(e).then(e=>{g(e),n(d+": "+e)}))}async function S(e){try{let t=[...v,{role:"user",content:e}];y(t),console.log(t);let n=l.chat.completions.create({...o,model:u,messages:t,temperature:m}),a=await Promise.race([n,new Promise((e,t)=>{setTimeout(e,6e4,d+": *nods silently*")})]),s=a.choices[0].message;return t.push(s),y(t),s.content}catch(e){return console.error(e),"*confused*"}}return(0,s.useEffect)(()=>N(t),[t]),(0,s.useEffect)(()=>(function(e){let t=[...v,...i];y(t)})(0),[i]),(0,a.jsxs)("div",{className:"command-line",children:[(0,a.jsx)("span",{className:"prompt-icon",hidden:!!f,children:"☺"}),(0,a.jsx)("span",{className:"prompt-icon",hidden:!f,children:"$"}),(0,a.jsx)(c.Z,{rows:1,cols:50,autoCapitalize:"sentences",className:"command-input",placeholder:h,value:f,onChange:function(e){p(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||x(e)}})]})}},3846:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(7437),s=n(2265),o=n(4131),c=n.n(o),r=n(7133).Buffer;function i(e){let{saveKey:t}=e,[n,o]=(0,s.useState)("");async function i(e){if(e.preventDefault(),"-"===n[2]){t(n);return}try{let e=await l(n);"-"===e[2]&&t(e)}catch(e){console.error("Bad OpenAI Key",e)}}async function l(e){let t=r.from("64656d6f2d6b6579"),n=c().createDecipheriv("aes256",e,t);return n.update("176371156ed20252cdf1681cc18e71bcdc97941e33a6aa2e2f5b58395bf4564c81dd242ff81d95ae39542d3e70f8395046184e8f91fd2fd799c7e7919fe766fd","hex","utf8")+n.final("utf8")}return(0,a.jsxs)("div",{className:"command-line",children:[(0,a.jsx)("span",{className:"prompt-icon",children:"░"}),(0,a.jsx)("form",{onSubmit:i,children:(0,a.jsx)("input",{size:100,type:"password",className:"command-input",autoFocus:!0,placeholder:"OpenAI Key -> Local Storage",onChange:function(e){o(e.target.value)}})})]})}},9302:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n(7437),s=n(2265),o=n(2178),c=n(3239),r=n(8149),i=n(5983);let l=[{$search:{index:"plot_embedding_cosine",knnBeta:{vector:[],path:"plot_embedding",k:10}}},{$project:{_id:0,plot_embedding:0}}];function u(e){let{openai:t,mongoClient:n,onResponse:o}=e,[c,r]=(0,s.useState)(""),[u,d]=(0,s.useState)("Vector Search");async function m(e){let a=await t.embeddings.create({input:e,model:"text-embedding-ada-002"});return l[0].$search.knnBeta.vector=a.data[0].embedding,n.db("sample_mflix").collection("embedded_movies").aggregate(l)}async function f(e){e.preventDefault(),d("..."),r("");let t=await m(c);o(t);let n=t.map(e=>e.title).join("\n");d(n)}return(0,a.jsxs)("div",{className:"command-line",children:[(0,a.jsx)("span",{className:"prompt-icon",children:"░"}),(0,a.jsx)(i.Z,{rows:1,cols:50,autoCapitalize:"sentences",className:"command-input",autoFocus:!0,placeholder:u,value:c,onChange:function(e){r(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||f(e)}})]})}var d=n(3846),m=JSON.parse('[{"role":"system","content":"You are a helpful movie database assistant. Use only information from the provided JSON documents containing details on movies. Each document contains a single movie, and information such as its title, release year, and cast."},{"role":"system","content":"Provide response texts with 500 symbols maximum"}]');function f(){let[e,t]=(0,s.useState)(""),[n,i]=(0,s.useState)([]),[l,f]=(0,s.useState)(),[p,h]=(0,s.useState)(),[g,v]=(0,s.useState)(!0),[y,x]=(0,s.useState)(!1),N=(0,s.useRef)();async function S(e){console.log(e);let t=e.map(e=>({role:"user",content:JSON.stringify(e)}));i(t)}async function j(e){console.log(e)}return(0,s.useEffect)(()=>{v(!1),N.current=localStorage.getItem("OPENAI_KEY")||""},[]),(0,s.useEffect)(()=>{let e=async()=>{let e=new c.gV({id:"ai-app-service-mxlkl"}),t=await e.logIn(c.cN.anonymous()),n=t.mongoClient("ai-app-service");f(n);let a=new o.ZP({apiKey:N.current||"",dangerouslyAllowBrowser:!0});h(a)};N&&e()},[y]),(0,a.jsx)("div",{className:"grid-container",children:(0,a.jsxs)("div",{className:"centered-div",hidden:g,children:[(0,a.jsx)("div",{hidden:!!N.current,children:(0,a.jsx)(d.Z,{saveKey:e=>{x(!0),localStorage.setItem("OPENAI_KEY",e),N.current=e}})}),(0,a.jsxs)("div",{hidden:!N.current,children:[(0,a.jsx)(r.Z,{name:"GPT",model:"gpt-3.5-turbo-16k",temperature:.5,request:e,systemContext:m,userContext:n,onResponse:j,openai:p}),(0,a.jsx)(u,{mongoClient:l,openai:p,onResponse:S})]})]})})}}},function(e){e.O(0,[218,649,977,913,239,971,596,744],function(){return e(e.s=2324)}),_N_E=e.O()}]);