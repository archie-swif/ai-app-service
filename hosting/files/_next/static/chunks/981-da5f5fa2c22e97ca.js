(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[981],{4699:function(e,t){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,s=u(e),o=s[0],a=s[1],h=new i((o+a)*3/4-a),l=0,c=a>0?o-4:o;for(r=0;r<c;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],h[l++]=t>>16&255,h[l++]=t>>8&255,h[l++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,h[l++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,h[l++]=t>>8&255,h[l++]=255&t),h},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=0,a=n-i;o<a;o+=16383)s.push(function(e,t,n){for(var i,s=[],o=t;o<n;o+=3)s.push(r[(i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}(e,o,o+16383>a?a:o+16383));return 1===i?s.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&s.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function u(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},7133:function(e,t,r){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var n=r(4699),i=r(9087),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return l(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!a.isEncoding(t))throw TypeError("Unknown encoding: "+t);var r=0|p(e,t),n=o(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(R(e,Uint8Array)){var t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return c(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(R(e,ArrayBuffer)||e&&R(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(R(e,SharedArrayBuffer)||e&&R(e.buffer,SharedArrayBuffer)))return f(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return a.from(n,t,r);var i=function(e){if(a.isBuffer(e)){var t,r=0|d(e.length),n=o(r);return 0===n.length||e.copy(n,0,0,r),n}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?o(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return h(e),o(e<0?0:0|d(e))}function c(e){for(var t=e.length<0?0:0|d(e.length),r=o(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e,t,r){var n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),a.prototype),n}function d(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||R(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return O(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return k(e).length;default:if(i)return n?-1:O(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,r){var i,s,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=I[e[s]];return i}(this,t,r);case"utf8":case"utf-8":return w(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return i=t,s=r,0===i&&s===this.length?n.fromByteArray(this):n.fromByteArray(this.slice(i,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}(this,t,r);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){var s;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(s=r=+r)!=s&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){var s,o=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;o=2,a/=2,u/=2,r/=2}function h(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(s=r;s<a;s++)if(h(e,s)===h(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===u)return l*o}else -1!==l&&(s-=s-l),l=-1}else for(r+u>a&&(r=a-u),s=r;s>=0;s--){for(var c=!0,f=0;f<u;f++)if(h(e,s+f)!==h(t,f)){c=!1;break}if(c)return s}return -1}function w(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,o,a,u,h=e[i],l=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=r)switch(c){case 1:h<128&&(l=h);break;case 2:(192&(s=e[i+1]))==128&&(u=(31&h)<<6|63&s)>127&&(l=u);break;case 3:s=e[i+1],o=e[i+2],(192&s)==128&&(192&o)==128&&(u=(15&h)<<12|(63&s)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(u=(15&h)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,c=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=c}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function v(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function E(e,t,r,n,i,s){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function A(e,t,r,n,i,s){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function x(e,t,r,n,s){return t=+t,r>>>=0,s||A(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function T(e,t,r,n,s){return t=+t,r>>>=0,s||A(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}t.lW=a,t.h2=50,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,r){return(h(e),e<=0)?o(e):void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)},a.allocUnsafe=function(e){return l(e)},a.allocUnsafeSlow=function(e){return l(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(R(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),R(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,n=a.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(R(s,Uint8Array))i+s.length>n.length?a.from(s).copy(n,i):Uint8Array.prototype.set.call(n,s,i);else if(a.isBuffer(s))s.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=s.length}return n},a.byteLength=p,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?w(this,0,e):y.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",r=t.h2;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(e,t,r,n,i){if(R(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var s=i-n,o=r-t,u=Math.min(s,o),h=this.slice(n,i),l=e.slice(t,r),c=0;c<u;++c)if(h[c]!==l[c]){s=h[c],o=l[c];break}return s<o?-1:o<s?1:0},a.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,s,o,a,u,h,l,c,f=this.length-t;if((void 0===r||r>f)&&(r=f),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var d=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(2*o,2),16);if(a!=a)break;e[r+o]=a}return o}(this,e,t,r);case"utf8":case"utf-8":return i=t,s=r,_(O(e,this.length-i),this,i,s);case"ascii":case"latin1":case"binary":return o=t,a=r,_(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,o,a);case"base64":return u=t,h=r,_(k(e),this,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l=t,c=r,_(function(e,t){for(var r,n,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i.push(r%256),i.push(n);return i}(e,this.length-l),this,l,c);default:if(d)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),d=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},a.prototype.readInt8=function(e,t){return(e>>>=0,t||v(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),i.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),i.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),i.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),i.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;E(this,e,t,r,i,0)}var s=1,o=0;for(this[t]=255&e;++o<r&&(s*=256);)this[t+o]=e/s&255;return t+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;E(this,e,t,r,i,0)}var s=r-1,o=1;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=e/o&255;return t+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);E(this,e,t,r,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);E(this,e,t,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return T(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return T(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},a.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){var i,s=e.charCodeAt(0);("utf8"===n&&s<128||"latin1"===n)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=a.isBuffer(e)?e:a.from(e,n),u=o.length;if(0===u)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%u]}return this};var S=/[^+/0-9A-Za-z-_]/g;function O(e,t){t=t||1/0;for(var r,n=e.length,i=null,s=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319||o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function k(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(S,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function _(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function R(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var I=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},9087:function(e,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */t.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,u=(1<<a)-1,h=u>>1,l=-7,c=r?i-1:0,f=r?-1:1,d=e[t+c];for(c+=f,s=d&(1<<-l)-1,d>>=-l,l+=a;l>0;s=256*s+e[t+c],c+=f,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=n;l>0;o=256*o+e[t+c],c+=f,l-=8);if(0===s)s=1-h;else{if(s===u)return o?NaN:(d?-1:1)*(1/0);o+=Math.pow(2,n),s-=h}return(d?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,a,u,h=8*s-i-1,l=(1<<h)-1,c=l>>1,f=23===i?5960464477539062e-23:0,d=n?0:s-1,p=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+c>=1?t+=f/u:t+=f*Math.pow(2,1-c),t*u>=2&&(o++,u/=2),o+c>=l?(a=0,o=l):o+c>=1?(a=(t*u-1)*Math.pow(2,i),o+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(o=o<<i|a,h+=i;h>0;e[r+d]=255&o,d+=p,o/=256,h-=8);e[r+d-p]|=128*y}},2601:function(e,t,r){"use strict";var n,i;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(i=r.g.process)?void 0:i.env)?r.g.process:r(8960)},8960:function(e){!function(){var t={229:function(e){var t,r,n,i=e.exports={};function s(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u=[],h=!1,l=-1;function c(){h&&n&&(h=!1,n.length?u=n.concat(u):l=-1,u.length&&f())}function f(){if(!h){var e=a(c);h=!0;for(var t=u.length;t;){for(n=u,u=[];++l<t;)n&&n[l].run();l=-1,t=u.length}n=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||h||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var s=r[e]={exports:{}},o=!0;try{t[e](s,s.exports,n),o=!1}finally{o&&delete r[e]}return s.exports}n.ab="//";var i=n(229);e.exports=i}()},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(2265),i=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,u={},h=null,l=null;for(n in void 0!==r&&(h=""+r),void 0!==t.key&&(h=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,n)&&!a.hasOwnProperty(n)&&(u[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===u[n]&&(u[n]=t[n]);return{$$typeof:i,type:e,key:h,ref:l,props:u,_owner:o.current}}t.jsx=u,t.jsxs=u},7437:function(e,t,r){"use strict";e.exports=r(622)},5983:function(e,t,r){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.d(t,{Z:function(){return E}});var i=r(2265),s=i.useLayoutEffect,o=function(e){var t=i.useRef(e);return s(function(){t.current=e}),t},a=function(e,t){if("function"==typeof e){e(t);return}e.current=t},u=function(e,t){var r=(0,i.useRef)();return(0,i.useCallback)(function(n){e.current=n,r.current&&a(r.current,null),r.current=t,t&&a(t,n)},[t])},h={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},l=function(e){Object.keys(h).forEach(function(t){e.style.setProperty(t,h[t],"important")})},c=null,f=function(e,t){var r=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?r+t.borderSize:r-t.paddingSize},d=function(){},p=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],y=!!document.documentElement.currentStyle,g=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var r=p.reduce(function(e,r){return e[r]=t[r],e},{}),n=r.boxSizing;if(""===n)return null;y&&"border-box"===n&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var i=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),s=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:i,borderSize:s}};function m(e,t,r){var n=o(r);i.useLayoutEffect(function(){var r=function(e){return n.current(e)};if(e)return e.addEventListener(t,r),function(){return e.removeEventListener(t,r)}},[])}var b=function(e){m(window,"resize",e)},w=function(e){m(document.fonts,"loadingdone",e)},v=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],E=i.forwardRef(function(e,t){var r=e.cacheMeasurements,s=e.maxRows,o=e.minRows,a=e.onChange,h=void 0===a?d:a,p=e.onHeightChange,y=void 0===p?d:p,m=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,v),E=void 0!==m.value,A=i.useRef(null),x=u(A,t),T=i.useRef(0),S=i.useRef(),O=function(){var e,t,n,i,a,u,h,d,p,m,b,w=A.current,v=r&&S.current?S.current:g(w);if(v){S.current=v;var E=(e=w.value||w.placeholder||"x",void 0===(t=o)&&(t=1),void 0===(n=s)&&(n=1/0),c||((c=document.createElement("textarea")).setAttribute("tabindex","-1"),c.setAttribute("aria-hidden","true"),l(c)),null===c.parentNode&&document.body.appendChild(c),i=v.paddingSize,a=v.borderSize,h=(u=v.sizingStyle).boxSizing,Object.keys(u).forEach(function(e){c.style[e]=u[e]}),l(c),c.value=e,d=f(c,v),c.value=e,d=f(c,v),c.value="x",m=(p=c.scrollHeight-i)*t,"border-box"===h&&(m=m+i+a),d=Math.max(m,d),b=p*n,"border-box"===h&&(b=b+i+a),[d=Math.min(b,d),p]),x=E[0],O=E[1];T.current!==x&&(T.current=x,w.style.setProperty("height",x+"px","important"),y(x,{rowHeight:O}))}};return i.useLayoutEffect(O),b(O),w(O),i.createElement("textarea",n({},m,{onChange:function(e){E||O(),h(e)},ref:x}))})},3239:function(e,t,r){"use strict";let n;r.d(t,{cN:function(){return e$},gV:function(){return eZ}});var i,s,o,a,u,h,l,c,f,d,p,y,g,m=r(607),b=r(2601),w=r(7133).lW,v=function(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},E=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},A=function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"},x=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},T=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,S=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],O=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function k(e){var t=""!==e&&S.reduce(function(t,r){var n=r[0],i=r[1];if(t)return t;var s=i.exec(e);return!!s&&[n,s]},!1);if(!t)return null;var r=t[0],n=t[1];if("searchbot"===r)return new x;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=v(v([],i,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-i.length),!0)):i=[];var s=i.join("."),o=function(e){for(var t=0,r=O.length;t<r;t++){var n=O[t],i=n[0];if(n[1].exec(e))return i}return null}(e),a=T.exec(e);return a&&a[1]?new A(r,s,o,a[1]):new E(r,s,o)}class _{constructor(){if(!_.fetch)throw Error("DefaultNetworkTransport.fetch must be set before it's used");if(!_.AbortController)throw Error("DefaultNetworkTransport.AbortController must be set before it's used")}fetchWithCallbacks(e,t){this.fetch(e).then(async e=>{let t=await e.text(),r={};return e.headers.forEach((e,t)=>{r[t]=e}),{statusCode:e.status,headers:r,body:t}}).then(e=>t.onSuccess(e)).catch(e=>t.onError(e))}async fetch(e){let{timeoutMs:t,url:r,...n}=e,{signal:i,cancelTimeout:s}=this.createTimeoutSignal(t);try{return await _.fetch(r,{..._.extraFetchOptions,signal:i,...n})}finally{s()}}createTimeoutSignal(e){if("number"!=typeof e)return{signal:void 0,cancelTimeout:()=>{}};{let t=new _.AbortController,r=setTimeout(()=>{t.abort()},e);return{signal:t.signal,cancelTimeout:()=>{clearTimeout(r)}}}}}_.DEFAULT_HEADERS={"Content-Type":"application/json"};let R=function(e){return e&&e.Math==Math&&e},I=R("object"==typeof globalThis&&globalThis)||R("object"==typeof window&&window)||R("object"==typeof self&&self)||R("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")();"undefined"!=typeof __DEV__&&__DEV__,_.fetch=I.fetch.bind(I),_.AbortController=I.AbortController.bind(I);let P="3.7.2",N="function"==typeof atob,U="function"==typeof btoa,C="function"==typeof w,B="function"==typeof TextDecoder?new TextDecoder:void 0,L="function"==typeof TextEncoder?new TextEncoder:void 0,j=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),D=(n={},j.forEach((e,t)=>n[e]=t),n),W=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,F=String.fromCharCode.bind(String),$="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=e=>e)=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),M=e=>e.replace(/=/g,"").replace(/[+\/]/g,e=>"+"==e?"-":"_"),V=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),q=e=>{let t,r,n,i,s="",o=e.length%3;for(let o=0;o<e.length;){if((r=e.charCodeAt(o++))>255||(n=e.charCodeAt(o++))>255||(i=e.charCodeAt(o++))>255)throw TypeError("invalid character found");s+=j[(t=r<<16|n<<8|i)>>18&63]+j[t>>12&63]+j[t>>6&63]+j[63&t]}return o?s.slice(0,o-3)+"===".substring(o):s},J=U?e=>btoa(e):C?e=>w.from(e,"binary").toString("base64"):q,z=C?e=>w.from(e).toString("base64"):e=>{let t=[];for(let r=0,n=e.length;r<n;r+=4096)t.push(F.apply(null,e.subarray(r,r+4096)));return J(t.join(""))},H=(e,t=!1)=>t?M(z(e)):z(e),X=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?F(192|t>>>6)+F(128|63&t):F(224|t>>>12&15)+F(128|t>>>6&63)+F(128|63&t)}var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return F(240|t>>>18&7)+F(128|t>>>12&63)+F(128|t>>>6&63)+F(128|63&t)},K=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,G=e=>e.replace(K,X),Y=C?e=>w.from(e,"utf8").toString("base64"):L?e=>z(L.encode(e)):e=>J(G(e)),Z=(e,t=!1)=>t?M(Y(e)):Y(e),Q=e=>Z(e,!0),ee=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,et=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return F((t>>>10)+55296)+F((1023&t)+56320);case 3:return F((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return F((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},er=e=>e.replace(ee,et),en=e=>{if(e=e.replace(/\s+/g,""),!W.test(e))throw TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r="",n,i;for(let s=0;s<e.length;)t=D[e.charAt(s++)]<<18|D[e.charAt(s++)]<<12|(n=D[e.charAt(s++)])<<6|(i=D[e.charAt(s++)]),r+=64===n?F(t>>16&255):64===i?F(t>>16&255,t>>8&255):F(t>>16&255,t>>8&255,255&t);return r},ei=N?e=>atob(V(e)):C?e=>w.from(e,"base64").toString("binary"):en,es=C?e=>$(w.from(e,"base64")):e=>$(ei(e),e=>e.charCodeAt(0)),eo=e=>es(eu(e)),ea=C?e=>w.from(e,"base64").toString("utf8"):B?e=>B.decode(es(e)):e=>er(ei(e)),eu=e=>V(e.replace(/[-_]/g,e=>"-"==e?"+":"/")),eh=e=>ea(eu(e)),el=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),ec=function(){let e=(e,t)=>Object.defineProperty(String.prototype,e,el(t));e("fromBase64",function(){return eh(this)}),e("toBase64",function(e){return Z(this,e)}),e("toBase64URI",function(){return Z(this,!0)}),e("toBase64URL",function(){return Z(this,!0)}),e("toUint8Array",function(){return eo(this)})},ef=function(){let e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,el(t));e("toBase64",function(e){return H(this,e)}),e("toBase64URI",function(){return H(this,!0)}),e("toBase64URL",function(){return H(this,!0)})},ed={version:P,VERSION:P,atob:ei,atobPolyfill:en,btoa:J,btoaPolyfill:q,fromBase64:eh,toBase64:Z,encode:Z,encodeURI:Q,encodeURL:Q,utob:G,btou:er,decode:eh,isValid:e=>{if("string"!=typeof e)return!1;let t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:H,toUint8Array:eo,extendString:ec,extendUint8Array:ef,extendBuiltins:()=>{ec(),ef()}},ep={relaxed:!1};function ey(e){return m.dF.serialize(e,ep)}function eg(e){return Array.isArray(e)?e.map(e=>m.dF.deserialize(e)):m.dF.deserialize(e)}(i=c||(c={})).Normal="normal",i.Server="server",(s=f||(f={})).NAME="name",s.EMAIL="email",s.PICTURE="picture",s.FIRST_NAME="first_name",s.LAST_NAME="last_name",s.GENDER="gender",s.BIRTHDAY="birthday",s.MIN_AGE="min_age",s.MAX_AGE="max_age";let em={[f.NAME]:"name",[f.EMAIL]:"email",[f.PICTURE]:"pictureUrl",[f.FIRST_NAME]:"firstName",[f.LAST_NAME]:"lastName",[f.GENDER]:"gender",[f.BIRTHDAY]:"birthday",[f.MIN_AGE]:"minAge",[f.MAX_AGE]:"maxAge"};class eb{constructor(e){if(this.type=c.Normal,this.identities=[],"object"==typeof e&&null!==e){let{type:t,identities:r,data:n}=e;if("string"==typeof t)this.type=t;else throw Error("Expected 'type' in the response body");if(Array.isArray(r))this.identities=r.map(e=>{let{id:t,provider_type:r}=e;return{id:t,providerType:r}});else throw Error("Expected 'identities' in the response body");if("object"==typeof n&&null!==n){let e=Object.fromEntries(Object.entries(n).map(([e,t])=>e in em?[em[e],t]:[e,t]));this.data=eg(e)}else throw Error("Expected 'data' in the response body")}else this.data={}}}class ew{constructor(e,t){this.storage=e,this.keyPart=t}get(e){return this.storage.get(this.keyPart+ew.PART_SEPARATOR+e)}set(e,t){return this.storage.set(this.keyPart+ew.PART_SEPARATOR+e,t)}remove(e){return this.storage.remove(this.keyPart+ew.PART_SEPARATOR+e)}prefix(e){return new ew(this,e)}clear(e=""){return this.storage.clear(this.keyPart+ew.PART_SEPARATOR+e)}addListener(e){return this.storage.addListener(e)}removeListener(e){return this.storage.addListener(e)}}ew.PART_SEPARATOR=":";let ev="accessToken",eE="refreshToken",eA="profile",ex="providerType";class eT extends ew{constructor(e,t){super(e,`user(${t})`)}get accessToken(){return this.get(ev)}set accessToken(e){null===e?this.remove(ev):this.set(ev,e)}get refreshToken(){return this.get(eE)}set refreshToken(e){null===e?this.remove(eE):this.set(eE,e)}get profile(){let e=this.get(eA);if(e){let t=new eb;return Object.assign(t,JSON.parse(e)),t}}set profile(e){e?this.set(eA,JSON.stringify(e)):this.remove(eA)}get providerType(){let e=this.get(ex);if(e)return e}set providerType(e){e?this.set(ex,e):this.remove(ex)}}function eS(e){return Object.fromEntries(Object.entries(e).filter(e=>void 0!==e[1]))}function eO(e,t=!0){let r=eS(e),n=t&&Object.keys(r).length>0?"?":"";return n+Object.entries(r).map(([e,t])=>`${e}=${encodeURIComponent(t)}`).join("&")}let ek=["inspect","callFunction","callFunctionStreaming",...Object.getOwnPropertyNames(Object.prototype)];function e_(e){let t=function(e){for(let t of e)if("object"==typeof t&&t)for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return e}(e);return t.map(e=>"object"==typeof e?ey(e):e)}class eR{constructor(e,t={}){this.fetcher=e,this.serviceName=t.serviceName,this.argsTransformation=t.argsTransformation||e_}static create(e,t={}){let r=new eR(e,t);return new Proxy(r,{get(e,t,r){if("string"==typeof t&&-1===ek.indexOf(t))return e.callFunction.bind(e,t);{let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}}})}async callFunction(e,...t){let r={name:e,arguments:this.argsTransformation?this.argsTransformation(t):t};this.serviceName&&(r.service=this.serviceName);let n=this.fetcher.appRoute;return this.fetcher.fetchJSON({method:"POST",path:n.functionsCall().path,body:r})}callFunctionStreaming(e,...t){let r={name:e,arguments:this.argsTransformation?this.argsTransformation(t):t};this.serviceName&&(r.service=this.serviceName);let n=this.fetcher.appRoute,i=eO({baas_request:ed.encode(JSON.stringify(r))});return this.fetcher.fetchStream({method:"GET",path:n.functionsCall().path+i})}}class eI{constructor(e,t="local-userpass"){this.fetcher=e,this.providerName=t}async registerUser(e){let t=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:t.emailPasswordAuth(this.providerName).register().path,body:e})}async confirmUser(e){let t=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:t.emailPasswordAuth(this.providerName).confirm().path,body:e})}async resendConfirmationEmail(e){let t=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:t.emailPasswordAuth(this.providerName).confirmSend().path,body:e})}async retryCustomConfirmation(e){let t=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:t.emailPasswordAuth(this.providerName).confirmCall().path,body:e})}async resetPassword(e){let t=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:t.emailPasswordAuth(this.providerName).reset().path,body:e})}async sendResetPasswordEmail(e){let t=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:t.emailPasswordAuth(this.providerName).resetSend().path,body:e})}async callResetPasswordFunction(e,...t){let r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).resetCall().path,body:{...e,arguments:t}})}}var eP={api:function(){return{path:"/api/client/v2.0",app(e){return{path:this.path+`/app/${e}`,location(){return{path:this.path+"/location"}},authProvider(e){return{path:this.path+`/auth/providers/${e}`,login(){return{path:this.path+"/login"}}}},emailPasswordAuth(e){let t=this.authProvider(e);return{...t,register(){return{path:this.path+"/register"}},confirm(){return{path:this.path+"/confirm"}},confirmSend(){return{path:this.path+"/confirm/send"}},confirmCall(){return{path:this.path+"/confirm/call"}},reset(){return{path:this.path+"/reset"}},resetSend(){return{path:this.path+"/reset/send"}},resetCall(){return{path:this.path+"/reset/call"}}}},functionsCall(){return{path:this.path+"/functions/call"}}}},auth(){return{path:this.path+"/auth",apiKeys(){return{path:this.path+"/api_keys",key(e){return{path:this.path+`/${e}`,enable(){return{path:this.path+"/enable"}},disable(){return{path:this.path+"/disable"}}}}}},profile(){return{path:this.path+"/profile"}},session(){return{path:this.path+"/session"}},delete(){return{path:this.path+"/delete"}}}}}}};class eN{constructor(e){this.fetcher=e}create(e){return this.fetcher.fetchJSON({method:"POST",body:{name:e},path:eP.api().auth().apiKeys().path,tokenType:"refresh"})}fetch(e){return this.fetcher.fetchJSON({method:"GET",path:eP.api().auth().apiKeys().key(e).path,tokenType:"refresh"})}fetchAll(){return this.fetcher.fetchJSON({method:"GET",tokenType:"refresh",path:eP.api().auth().apiKeys().path})}async delete(e){await this.fetcher.fetchJSON({method:"DELETE",path:eP.api().auth().apiKeys().key(e).path,tokenType:"refresh"})}async enable(e){await this.fetcher.fetchJSON({method:"PUT",path:eP.api().auth().apiKeys().key(e).enable().path,tokenType:"refresh"})}async disable(e){await this.fetcher.fetchJSON({method:"PUT",path:eP.api().auth().apiKeys().key(e).disable().path,tokenType:"refresh"})}}let eU=null;function eC(){if(eU)return eU;throw Error("Cannot get environment before it's set")}class eB extends Error{constructor({message:e,code:t}){super(e),this.name="WatchError",this.code=t}}(o=d||(d={})).NEED_DATA="NEED_DATA",o.HAVE_EVENT="HAVE_EVENT",o.HAVE_ERROR="HAVE_ERROR";class eL{constructor(){this._state=d.NEED_DATA,this._error=null,this._textDecoder=new(eC()).TextDecoder,this._buffer="",this._bufferOffset=0,this._eventType="",this._dataBuffer=""}feedBuffer(e){this.assertState(d.NEED_DATA),this._buffer+=this._textDecoder.decode(e,{stream:!0}),this.advanceBufferState()}feedLine(e){if(this.assertState(d.NEED_DATA),e.endsWith("\n")&&(e=e.substr(0,e.length-1)),e.endsWith("\r")&&(e=e.substr(0,e.length-1)),0===e.length){if(0===this._dataBuffer.length){this._eventType="";return}this._dataBuffer.endsWith("\n")&&(this._dataBuffer=this._dataBuffer.substr(0,this._dataBuffer.length-1)),this.feedSse({data:this._dataBuffer,eventType:this._eventType}),this._dataBuffer="",this._eventType=""}if(":"===e[0])return;let t=e.indexOf(":"),r=e.substr(0,t),n=-1===t?"":e.substr(t+1);n.startsWith(" ")&&(n=n.substr(1)),"event"===r?this._eventType=n:"data"===r&&(this._dataBuffer+=n,this._dataBuffer+="\n")}feedSse(e){this.assertState(d.NEED_DATA);let t=e.data.indexOf("%");if(-1!==t){let r="",n=0;for(let i=t;-1!==i;i=e.data.indexOf("%",n)){r+=e.data.substr(n,i-n);let t=e.data.substr(i,3);"%25"===t?r+="%":"%0A"===t?r+="\n":"%0D"===t?r+="\r":r+=t,n=i+t.length}r+=e.data.substr(n),e.data=r}if(e.eventType&&"message"!==e.eventType){if("error"===e.eventType){this._state=d.HAVE_ERROR,this._error=new eB({message:e.data,code:"unknown"});try{let{error_code:t,error:r}=m.dF.parse(e.data);if("string"!=typeof t||"string"!=typeof r)return;this._error=new eB({message:r,code:t})}catch{return}}}else{try{let t=m.dF.parse(e.data);if("object"==typeof t){this._nextEvent=t,this._state=d.HAVE_EVENT;return}}catch{}this._state=d.HAVE_ERROR,this._error=new eB({message:"server returned malformed event: "+e.data,code:"bad bson parse"})}}get state(){return this._state}nextEvent(){this.assertState(d.HAVE_EVENT);let e=this._nextEvent;return this._state=d.NEED_DATA,this.advanceBufferState(),e}get error(){return this._error}advanceBufferState(){for(this.assertState(d.NEED_DATA);this.state===d.NEED_DATA;){if(this._bufferOffset===this._buffer.length){this._buffer="",this._bufferOffset=0;return}let e=this._buffer.indexOf("\n",this._bufferOffset);if(-1===e){0!==this._bufferOffset&&(this._buffer=this._buffer.substr(this._bufferOffset,this._buffer.length-this._bufferOffset),this._bufferOffset=0);return}this.feedLine(this._buffer.substr(this._bufferOffset,e-this._bufferOffset)),this._bufferOffset=e+1}}assertState(e){if(this._state!==e)throw Error(`Expected WatchStream to be in state ${e}, but in state ${this._state}`)}}class ej{constructor(e,t,r,n){this.functions=eR.create(e,{serviceName:t}),this.databaseName=r,this.collectionName=n,this.serviceName=t,this.fetcher=e}find(e={},t={}){return this.functions.find({database:this.databaseName,collection:this.collectionName,query:e,project:t.projection,sort:t.sort,limit:t.limit})}findOne(e={},t={}){return this.functions.findOne({database:this.databaseName,collection:this.collectionName,query:e,project:t.projection,sort:t.sort})}findOneAndUpdate(e={},t,r={}){return this.functions.findOneAndUpdate({database:this.databaseName,collection:this.collectionName,filter:e,update:t,sort:r.sort,projection:r.projection,upsert:r.upsert,returnNewDocument:r.returnNewDocument})}findOneAndReplace(e={},t,r={}){return this.functions.findOneAndReplace({database:this.databaseName,collection:this.collectionName,filter:e,update:t,sort:r.sort,projection:r.projection,upsert:r.upsert,returnNewDocument:r.returnNewDocument})}findOneAndDelete(e={},t={}){return this.functions.findOneAndReplace({database:this.databaseName,collection:this.collectionName,filter:e,sort:t.sort,projection:t.projection})}aggregate(e){return this.functions.aggregate({database:this.databaseName,collection:this.collectionName,pipeline:e})}count(e={},t={}){return this.functions.count({database:this.databaseName,collection:this.collectionName,query:e,limit:t.limit})}insertOne(e){return this.functions.insertOne({database:this.databaseName,collection:this.collectionName,document:e})}insertMany(e){return this.functions.insertMany({database:this.databaseName,collection:this.collectionName,documents:e})}deleteOne(e={}){return this.functions.deleteOne({database:this.databaseName,collection:this.collectionName,query:e})}deleteMany(e={}){return this.functions.deleteMany({database:this.databaseName,collection:this.collectionName,query:e})}updateOne(e,t,r={}){return this.functions.updateOne({database:this.databaseName,collection:this.collectionName,query:e,update:t,upsert:r.upsert,arrayFilters:r.arrayFilters})}updateMany(e,t,r={}){return this.functions.updateMany({database:this.databaseName,collection:this.collectionName,query:e,update:t,upsert:r.upsert,arrayFilters:r.arrayFilters})}watch({ids:e,filter:t}={}){let r=this.functions.callFunctionStreaming("watch",{database:this.databaseName,collection:this.collectionName,ids:e,filter:t}),n=r.then(e=>e[Symbol.asyncIterator]()),i=this.watchImpl(n),s=i.return;return Object.assign(i,{return:e=>(n.then(t=>t.return?t.return(e):void 0),s.call(i,e))})}async *watchImpl(e){let t=new eL,r=e.then(e=>({[Symbol.asyncIterator]:()=>e}));for await(let e of(await r))if(e){for(t.feedBuffer(e);t.state==d.HAVE_EVENT;)yield t.nextEvent();if(t.state==d.HAVE_ERROR)throw t.error}}}function eD(e,t,r,n){return new ej(e,t,r,n)}function eW(e,t,r){return{collection:eD.bind(null,e,t,r)}}(a=p||(p={})).Active="active",a.LoggedOut="logged-out",a.Removed="removed",(u=y||(y={})).Normal="normal",u.Server="server";class eF{constructor(e){if(this.app=e.app,this.id=e.id,this.storage=new eT(this.app.storage,this.id),"accessToken"in e&&"refreshToken"in e&&"providerType"in e)this._accessToken=e.accessToken,this._refreshToken=e.refreshToken,this.providerType=e.providerType,this.storage.accessToken=e.accessToken,this.storage.refreshToken=e.refreshToken,this.storage.providerType=e.providerType;else{this._accessToken=this.storage.accessToken,this._refreshToken=this.storage.refreshToken;let e=this.storage.providerType;if(this._profile=this.storage.profile,e)this.providerType=e;else throw Error("Storage is missing a provider type")}this.fetcher=this.app.fetcher.clone({userContext:{currentUser:this}}),this.apiKeys=new eN(this.fetcher),this.functions=eR.create(this.fetcher)}get accessToken(){return this._accessToken}set accessToken(e){this._accessToken=e,this.storage.accessToken=e}get refreshToken(){return this._refreshToken}set refreshToken(e){this._refreshToken=e,this.storage.refreshToken=e}get state(){return this.id in this.app.allUsers?null===this.refreshToken?p.LoggedOut:p.Active:p.Removed}get isLoggedIn(){return this.state===p.Active}get customData(){if(this.accessToken){let e=this.decodeAccessToken();return e.userData}throw Error("Cannot read custom data without an access token")}get profile(){if(this._profile)return this._profile.data;throw Error("A profile was never fetched for this user")}get identities(){if(this._profile)return this._profile.identities;throw Error("A profile was never fetched for this user")}get deviceId(){if(this.accessToken){let e=this.accessToken.split(".")[1];if(e){let t=JSON.parse(ed.decode(e)),r=t.baas_device_id;if("string"==typeof r&&"000000000000000000000000"!==r)return r}}return null}async refreshProfile(){let e=await this.fetcher.fetchJSON({method:"GET",path:eP.api().auth().profile().path});this._profile=new eb(e),this.storage.profile=this._profile}async logOut(){try{null!==this._refreshToken&&await this.fetcher.fetchJSON({method:"DELETE",path:eP.api().auth().session().path,tokenType:"refresh"})}catch(e){if(!(e instanceof Error)||!e.message.includes("failed to find refresh token"))throw e}finally{this.accessToken=null,this.refreshToken=null}}async linkCredentials(e){let t=await this.app.authenticator.authenticate(e,this);if(this.id!==t.userId){let e=`got user id ${t.userId} expected ${this.id}`;throw Error(`Link response ment for another user (${e})`)}this.accessToken=t.accessToken,await this.refreshProfile()}async refreshAccessToken(){let e=await this.fetcher.fetchJSON({method:"POST",path:eP.api().auth().session().path,tokenType:"refresh"}),{access_token:t}=e;if("string"==typeof t)this.accessToken=t;else throw Error("Expected an 'access_token' in the response")}async refreshCustomData(){return await this.refreshAccessToken(),this.customData}addListener(){throw Error("Not yet implemented")}removeListener(){throw Error("Not yet implemented")}removeAllListeners(){throw Error("Not yet implemented")}callFunction(e,...t){return this.functions.callFunction(e,...t)}toJSON(){return{id:this.id,accessToken:this.accessToken,refreshToken:this.refreshToken,profile:this._profile,state:this.state,customData:this.customData}}push(){throw Error("Not yet implemented")}mongoClient(e){return function(e,t="mongo-db"){return{db:eW.bind(null,e,t)}}(this.fetcher,e)}decodeAccessToken(){if(this.accessToken){let e=this.accessToken.split(".");if(3!==e.length)throw Error("Expected an access token with three parts");let t=e[1],r=ed.decode(t),n=JSON.parse(r),{exp:i,iat:s,sub:o,user_data:a={}}=n;if("number"!=typeof i)throw Error("Failed to decode access token 'exp'");if("number"!=typeof s)throw Error("Failed to decode access token 'iat'");return{expires:i,issuedAt:s,subject:o,userData:a}}throw Error("Missing an access token")}}class e${constructor(e,t,r){this.providerName=e,this.providerType=t,this.payload=r}static anonymous(){return new e$("anon-user","anon-user",{})}static apiKey(e){return new e$("api-key","api-key",{key:e})}static emailPassword(e,t){return new e$("local-userpass","local-userpass",{username:e,password:t})}static function(e){return new e$("custom-function","custom-function",e)}static jwt(e){return new e$("custom-token","custom-token",{token:e})}static google(e){return new e$("oauth2-google","oauth2-google",e$.derivePayload(e))}static derivePayload(e){if("string"==typeof e)throw Error("`google(<tokenString>)` has been deprecated.  Please use `google(<authCodeObject>).");if(1===Object.keys(e).length){if("authCode"in e||"redirectUrl"in e)return e;if("idToken"in e)return{id_token:e.idToken};throw Error("Unexpected payload: "+JSON.stringify(e))}throw Error("Expected only one property in payload, got "+JSON.stringify(e))}static facebook(e){return new e$("oauth2-facebook","oauth2-facebook",e.includes("://")?{redirectUrl:e}:{accessToken:e})}static apple(e){return new e$("oauth2-apple","oauth2-apple",e.includes("://")?{redirectUrl:e}:{id_token:e})}}let eM="userIds",eV="deviceId";class eq extends ew{constructor(e,t){super(e,`app(${t})`)}getUserIds(){let e=this.get(eM),t=e?JSON.parse(e):[];if(Array.isArray(t))return[...new Set(t)];throw Error("Expected the user ids to be an array")}setUserIds(e,t){if(t){let t=this.getUserIds();for(let r of t)-1===e.indexOf(r)&&e.push(r)}this.set(eM,JSON.stringify(e))}removeUserId(e){let t=this.getUserIds(),r=t.filter(t=>t!==e);this.setUserIds(r,!1)}getDeviceId(){return this.get(eV)}setDeviceId(e){this.set(eV,e)}}let eJ={_stitch_client_app_id:"appId",_baas_client_app_id:"appId",_stitch_ua:"userAuth",_baas_ua:"userAuth",_stitch_link:"link",_baas_link:"link",_stitch_error:"error",_baas_error:"error",_stitch_state:"state",_baas_state:"state"};class ez{constructor(e,t=eC().openWindow){this.storage=e.prefix("oauth2"),this.openWindow=t}static parseRedirectLocation(e){let t=function(e){let t="?"===e[0]?e.substr(1):e;return Object.fromEntries(t.split("&").filter(e=>e.length>0).map(e=>e.split("=")).map(([e,t])=>[e,decodeURIComponent(t)]))}(e),r={};for(let[e,n]of Object.entries(eJ)){let i=t[e];i&&(r[n]=i)}return r}static handleRedirect(e,t=eC().defaultStorage){let r=ez.parseRedirectLocation(e),{state:n,error:i}=r;if("string"==typeof n){let e=t.prefix("oauth2"),i=ez.getStateStorage(e,n);i.set("result",JSON.stringify(r))}else if(i)throw Error(`Failed to handle OAuth 2.0 redirect: ${i}`);else throw Error("Failed to handle OAuth 2.0 redirect.")}static decodeAuthInfo(e){let t=(e||"").split("$");if(4===t.length){let[e,r,n,i]=t;return{accessToken:e,refreshToken:r,userId:n,deviceId:i}}throw Error("Failed to decode 'authInfo' into ids and tokens")}static getStateStorage(e,t){return e.prefix(`state(${t})`)}openWindowAndWaitForRedirect(e,t){let r=ez.getStateStorage(this.storage,t);return new Promise((t,n)=>{let i,s=null,o=()=>{let e=r.get("result");if(e){let n=JSON.parse(e);r.removeListener(o),r.clear();try{s&&(clearInterval(i),s.close())}catch(e){console.warn(`Failed closing redirect window: ${e}`)}finally{t(n)}}};r.addListener(o),s=this.openWindow(e),i=setInterval(()=>{if(s){if(s.closed){clearInterval(i),r.removeListener(o);let e=Error("Window closed");n(e)}}else clearInterval(i)},100)})}generateState(){return function(e,t){let r="";for(let e=0;e<12;e++)r+=t[Math.floor(Math.random()*t.length)];return r}(0,"abcdefghijklmnopqrstuvwxyz")}}let eH="x-baas-location";class eX{constructor(e,t,r){this.fetcher=e,this.oauth2=new ez(t),this.getDeviceInformation=r}async authenticate(e,t){let r=this.getDeviceInformation(),n="object"==typeof t;if(e.providerType.startsWith("oauth2")&&"string"==typeof e.payload.redirectUrl){let i=this.oauth2.generateState(),s=await this.getLogInUrl(e,n,{state:i,redirect:e.payload.redirectUrl,providerRedirectHeader:!!n||void 0,device:n?void 0:r.encode()});if(!n)return this.openWindowAndWaitForAuthResponse(s,i);{let e=await this.fetcher.fetch({method:"GET",url:s,tokenType:n?"access":"none",user:t,mode:"cors",credentials:"include"}),r=e.headers.get(eH);if(r)return this.openWindowAndWaitForAuthResponse(r,i);throw Error(`Missing ${eH} header`)}}{let i=await this.getLogInUrl(e,n),s=await this.fetcher.fetchJSON({method:"POST",url:i,body:{...e.payload,options:{device:r.toJSON()}},tokenType:n?"access":"none",user:t}),{user_id:o,access_token:a,refresh_token:u=null,device_id:h}=s;if("string"!=typeof o)throw Error("Expected a user id in the response");if("string"!=typeof a)throw Error("Expected an access token in the response");if("string"!=typeof u&&null!==u)throw Error("Expected refresh token to be a string or null");if("string"!=typeof h)throw Error("Expected device id to be a string");return{userId:o,accessToken:a,refreshToken:u,deviceId:h}}}async getLogInUrl(e,t=!1,r={}){let n=this.fetcher.appRoute,i=n.authProvider(e.providerName).login(),s=eO({link:t?"true":void 0,...r}),o=await this.fetcher.locationUrl;return o+i.path+s}async openWindowAndWaitForAuthResponse(e,t){let r=await this.oauth2.openWindowAndWaitForRedirect(e,t);return ez.decodeAuthInfo(r.userAuth)}}class eK extends Error{constructor(e,t,r,n,i,s,o){let a=n?`status ${r} ${n}`:`status ${r}`;"string"==typeof i?super(`Request failed (${e} ${t}): ${i} (${a})`):super(`Request failed (${e} ${t}): (${a})`),this.method=e,this.url=t,this.statusText=n,this.statusCode=r,this.error=i,this.errorCode=s,this.link=o}static async fromRequestAndResponse(e,t){var r;let{url:n,method:i}=e,{status:s,statusText:o}=t;if(null===(r=t.headers.get("content-type"))||void 0===r?void 0:r.startsWith("application/json")){let e=await t.json();if("object"==typeof e&&e){let{error:t,error_code:r,link:a}=e;return new eK(i,n,s,o,"string"==typeof t?t:void 0,"string"==typeof r?r:void 0,"string"==typeof a?a:void 0)}}return new eK(i,n,s,o)}}class eG{constructor({appId:e,transport:t,userContext:r,locationUrlContext:n}){this.appId=e,this.transport=t,this.userContext=r,this.locationUrlContext=n}static buildAuthorizationHeader(e,t){if(!e||"none"===t)return{};if("access"===t)return{Authorization:`Bearer ${e.accessToken}`};if("refresh"===t)return{Authorization:`Bearer ${e.refreshToken}`};throw Error(`Unexpected token type (${t})`)}static buildBody(e){if(e){if("object"==typeof e&&null!==e)return JSON.stringify(ey(e));if("string"==typeof e)return e;throw console.log("body is",e),Error("Unexpected type of body")}}static buildJsonHeader(e){return e&&e.length>0?{"Content-Type":"application/json"}:{}}clone(e){return new eG({appId:this.appId,transport:this.transport,userContext:this.userContext,locationUrlContext:this.locationUrlContext,...e})}async fetch(e){let{path:t,url:r,tokenType:n="access",user:i=this.userContext.currentUser,...s}=e;if("string"==typeof t&&"string"==typeof r)throw Error("Use of 'url' and 'path' mutually exclusive");if("string"==typeof t){let r=await this.locationUrlContext.locationUrl+t;return this.fetch({...e,path:void 0,url:r})}if("string"==typeof r){let t=await this.transport.fetch({...s,url:r,headers:{...eG.buildAuthorizationHeader(i,n),...e.headers}});if(t.ok)return t;if(i&&401===t.status&&"access"===n)return await i.refreshAccessToken(),this.fetch({...e,user:i});throw i&&401===t.status&&"refresh"===n&&(i.accessToken=null,i.refreshToken=null),await eK.fromRequestAndResponse(e,t)}throw Error("Expected either 'url' or 'path'")}async fetchJSON(e){let{body:t}=e,r=eG.buildBody(t),n=eG.buildJsonHeader(r),i=await this.fetch({...e,body:r,headers:{Accept:"application/json",...n,...e.headers}}),s=i.headers.get("content-type");if(null==s?void 0:s.startsWith("application/json")){let e=await i.json();return eg(e)}if(null===s)return null;throw Error(`Expected JSON response, got "${s}"`)}async fetchStream(e){let{body:t}=await this.fetch({...e,headers:{Accept:"text/event-stream",...e.headers}});return function(e){if("object"!=typeof e||null===e)throw Error("Expected a non-null object");if(Symbol.asyncIterator in e)return e;if("getReader"in e)return{[Symbol.asyncIterator](){let t=e.getReader();return{next:()=>t.read(),return:async()=>(await t.cancel(),{done:!0,value:null})}}};throw Error("Expected an AsyncIterable or a ReadableStream")}(t)}get appRoute(){return eP.api().app(this.appId)}get locationUrl(){return this.locationUrlContext.locationUrl}}(h=g||(g={})).DEVICE_ID="deviceId",h.APP_ID="appId",h.APP_VERSION="appVersion",h.PLATFORM="platform",h.PLATFORM_VERSION="platformVersion",h.SDK_VERSION="sdkVersion";class eY{constructor({appId:e,appVersion:t,deviceId:r}){this.sdkVersion="2.0.0";let n=eC();this.platform=n.platform,this.platformVersion=n.platformVersion,this.appId=e,this.appVersion=t,this.deviceId=r}encode(){let e=eS(this);return ed.encode(JSON.stringify(e))}toJSON(){return eS(this)}}class eZ{constructor(e){this.users=[],this._locationUrl=null;let t="string"==typeof e?{id:e}:e;if("object"==typeof t&&"string"==typeof t.id)this.id=t.id;else throw Error("Missing an Atlas App Services app-id");this.baseUrl=t.baseUrl||"https://realm.mongodb.com",t.skipLocationRequest&&(this._locationUrl=Promise.resolve(this.baseUrl)),this.localApp=t.app;let{storage:r,transport:n=new _}=t;this.fetcher=new eG({appId:this.id,userContext:this,locationUrlContext:this,transport:n}),this.emailPasswordAuth=new eI(this.fetcher);let i=r||eC().defaultStorage;this.storage=new eq(i,this.id),this.authenticator=new eX(this.fetcher,i,()=>this.deviceInformation);try{this.hydrate()}catch(e){this.storage.clear(),console.warn("Realm app hydration failed:",e instanceof Error?e.message:e)}}static getApp(e){if(e in eZ.appCache)return eZ.appCache[e];{let t=new eZ(e);return eZ.appCache[e]=t,t}}switchUser(e){let t=this.users.findIndex(t=>t===e);if(-1===t)throw Error("The user was never logged into this app");let[r]=this.users.splice(t,1);this.users.unshift(r)}async logIn(e,t=!0){let r=await this.authenticator.authenticate(e),n=this.createOrUpdateUser(r,e.providerType);this.switchUser(n),t&&await n.refreshProfile(),this.storage.setUserIds(this.users.map(e=>e.id),!0);let i=r.deviceId;return i&&"000000000000000000000000"!==i&&this.storage.set("deviceId",i),n}async removeUser(e){let t=this.users.findIndex(t=>t===e);if(-1===t)throw Error("The user was never logged into this app");this.users.splice(t,1),await e.logOut(),this.storage.remove(`user(${e.id}):profile`),this.storage.removeUserId(e.id)}async deleteUser(e){await this.fetcher.fetchJSON({method:"DELETE",path:eP.api().auth().delete().path}),await this.removeUser(e)}addListener(){throw Error("Not yet implemented")}removeListener(){throw Error("Not yet implemented")}removeAllListeners(){throw Error("Not yet implemented")}get currentUser(){let e=this.users.filter(e=>e.state===p.Active);return 0===e.length?null:e[0]}get allUsers(){return Object.fromEntries(this.users.map(e=>[e.id,e]))}get locationUrl(){if(!this._locationUrl){let e=eP.api().app(this.id).location().path;this._locationUrl=this.fetcher.fetchJSON({method:"GET",url:this.baseUrl+e,tokenType:"none"}).then(e=>{if("object"==typeof e)return e;throw Error("Expected response body be an object")}).then(({hostname:e})=>{if("string"==typeof e)return e;throw Error("Expected response to contain a 'hostname'")}).catch(e=>{throw this._locationUrl=null,e})}return this._locationUrl}get deviceInformation(){let e=this.storage.getDeviceId(),t="string"==typeof e&&"000000000000000000000000"!==e?new m.Zw(e):void 0;return new eY({appId:this.localApp?this.localApp.name:void 0,appVersion:this.localApp?this.localApp.version:void 0,deviceId:t})}createOrUpdateUser(e,t){let r=this.users.find(t=>t.id===e.userId);if(r)return r.accessToken=e.accessToken,r.refreshToken=e.refreshToken,r;{if(!e.refreshToken)throw Error("No refresh token in response from server");let r=new eF({app:this,id:e.userId,accessToken:e.accessToken,refreshToken:e.refreshToken,providerType:t});return this.users.unshift(r),r}}hydrate(){let e=this.storage.getUserIds();this.users=e.map(e=>new eF({app:this,id:e}))}}eZ.appCache={},eZ.Credentials=e$;let eQ=function(e){return e&&e.Math==Math&&e},e0=eQ("object"==typeof globalThis&&globalThis)||eQ("object"==typeof window&&window)||eQ("object"==typeof self&&self)||eQ("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")();"undefined"!=typeof __DEV__&&__DEV__;let e1=l?k(l):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}:"undefined"!=typeof navigator?k(navigator.userAgent):void 0!==b&&b.version?new function(e){this.version=e,this.type="node",this.name="node",this.os=b.platform}(b.version.slice(1)):null,e2="localStorage"in e0?class{constructor(){if("object"==typeof e0.localStorage)this.global=e0;else throw Error("Cannot use LocalStorage without a global localStorage object")}get(e){return this.global.localStorage.getItem(e)}set(e,t){return this.global.localStorage.setItem(e,t)}remove(e){return this.global.localStorage.removeItem(e)}prefix(e){return new ew(this,e)}clear(e){let t=[];for(let r=0;r<this.global.localStorage.length;r++){let n=this.global.localStorage.key(r);n&&(!e||n.startsWith(e))&&t.push(n)}for(let e of t)this.global.localStorage.removeItem(e)}addListener(e){return this.global.addEventListener("storage",e)}removeListener(e){return this.global.removeEventListener("storage",e)}}:class{constructor(){this.storage={},this.listeners=new Set}get(e){return e in this.storage?this.storage[e]:null}set(e,t){this.storage[e]=t,this.fireListeners()}remove(e){delete this.storage[e],this.fireListeners()}prefix(e){return new ew(this,e)}clear(e){for(let t of Object.keys(this.storage))(!e||t.startsWith(e))&&delete this.storage[t];this.fireListeners()}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}fireListeners(){this.listeners.forEach(e=>e())}},e6={defaultStorage:new e2().prefix("realm-web"),openWindow:function(e){return"function"==typeof e0.open?e0.open(e):(console.log(`Please open ${e}`),null)},platform:(null==e1?void 0:e1.name)||"web",platformVersion:(null==e1?void 0:e1.version)||"0.0.0",TextDecoder};eU=e6},2178:function(e,t,r){"use strict";let n;r.d(t,{ZP:function(){return e2}});var i,s,o,a,u,h={};r.r(h),r.d(h,{APIConnectionError:function(){return m},APIConnectionTimeoutError:function(){return b},APIError:function(){return y},APIUserAbortError:function(){return g},AuthenticationError:function(){return v},BadRequestError:function(){return w},ConflictError:function(){return x},InternalServerError:function(){return O},NotFoundError:function(){return A},PermissionDeniedError:function(){return E},RateLimitError:function(){return S},UnprocessableEntityError:function(){return T}});let l="4.6.0";var c=r(7133).lW;class f{constructor(e,t){this.response=e,this.controller=t,this.decoder=new d}async *iterMessages(){if(!this.response.body)throw this.controller.abort(),Error("Attempted to iterate over a response with no body");let e=new p,t=function(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return(null==e?void 0:e.done)&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}(this.response.body);for await(let r of t)for(let t of e.decode(r)){let e=this.decoder.decode(t);e&&(yield e)}for(let t of e.flush()){let e=this.decoder.decode(t);e&&(yield e)}}async *[Symbol.asyncIterator](){let e=!1;try{for await(let t of this.iterMessages())if(!e){if(t.data.startsWith("[DONE]")){e=!0;continue}if(null===t.event)try{yield JSON.parse(t.data)}catch(e){throw console.error("Could not parse message into JSON:",t.data),console.error("From chunk:",t.raw),e}}e=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{e||this.controller.abort()}}}class d{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,n]=function(e,t){let r=e.indexOf(t);return -1!==r?[e.substring(0,r),t,e.substring(r+t.length)]:[e,"",""]}(e,":");return n.startsWith(" ")&&(n=n.substring(1)),"event"===t?this.event=n:"data"===t&&this.data.push(n),null}}class p{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];let r=p.NEWLINE_CHARS.has(t[t.length-1]||""),n=t.split(p.NEWLINE_REGEXP);return 1!==n.length||r?(this.buffer.length>0&&(n=[this.buffer.join("")+n[0],...n.slice(1)],this.buffer=[]),r||(this.buffer=[n.pop()||""]),n):(this.buffer.push(n[0]),[])}decodeText(e){var t;if(null==e)return"";if("string"==typeof e)return e;if(void 0!==c){if(e instanceof c)return e.toString();if(e instanceof Uint8Array)return c.from(e).toString();throw Error(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return null!==(t=this.textDecoder)&&void 0!==t||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw Error(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw Error("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];let e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}p.NEWLINE_CHARS=new Set(["\n","\r","\v","\f","\x1c","\x1d","\x1e","\x85","\u2028","\u2029"]),p.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;class y extends Error{constructor(e,t,r,n){super(y.makeMessage(t,r)),this.status=e,this.headers=n,this.error=t,this.code=null==t?void 0:t.code,this.param=null==t?void 0:t.param,this.type=null==t?void 0:t.type}static makeMessage(e,t){return(null==e?void 0:e.message)?"string"==typeof e.message?e.message:JSON.stringify(e.message):e?JSON.stringify(e):t||"Unknown error occurred"}static generate(e,t,r,n){if(!e)return new m({cause:ep(t)});let i=null==t?void 0:t.error;return 400===e?new w(e,i,r,n):401===e?new v(e,i,r,n):403===e?new E(e,i,r,n):404===e?new A(e,i,r,n):409===e?new x(e,i,r,n):422===e?new T(e,i,r,n):429===e?new S(e,i,r,n):e>=500?new O(e,i,r,n):new y(e,i,r,n)}}class g extends y{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class m extends y{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}class b extends m{constructor({message:e}={}){super({message:null!=e?e:"Request timed out."})}}class w extends y{constructor(){super(...arguments),this.status=400}}class v extends y{constructor(){super(...arguments),this.status=401}}class E extends y{constructor(){super(...arguments),this.status=403}}class A extends y{constructor(){super(...arguments),this.status=404}}class x extends y{constructor(){super(...arguments),this.status=409}}class T extends y{constructor(){super(...arguments),this.status=422}}class S extends y{constructor(){super(...arguments),this.status=429}}class O extends y{}let k=e=>{},_=fetch.bind(void 0),R=FormData,I="undefined"!=typeof File?File:class extends Blob{constructor(){throw Error("file uploads aren't supported in this environment yet as 'File' is not defined")}};async function P(e,t){return{...t,body:new M(e)}}async function N(){throw Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")}var U=r(7133).lW;let C=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob,B=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&L(e),L=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer,j=e=>B(e)||C(e)||!1;async function D(e,t,r={}){var n,i,s,o,a;if(C(e=await e)){let i=await e.blob();return t||(t=null!==(n=new URL(e.url).pathname.split(/[\\/]/).pop())&&void 0!==n?n:"unknown_file"),new I([i],t,r)}let u=await W(e);if(t||(t=null!==(i=F((o=e).name)||F(o.filename)||(null===(a=F(o.path))||void 0===a?void 0:a.split(/[\\/]/).pop()))&&void 0!==i?i:"unknown_file"),!r.type){let e=null===(s=u[0])||void 0===s?void 0:s.type;"string"==typeof e&&(r={...r,type:e})}return new I(u,t,r)}async function W(e){var t;let r=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)r.push(e);else if(L(e))r.push(await e.arrayBuffer());else if($(e))for await(let t of e)r.push(t);else throw Error(`Unexpected data type: ${typeof e}; constructor: ${null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name}; props: ${function(e){let t=Object.getOwnPropertyNames(e);return`[${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`);return r}let F=e=>"string"==typeof e?e:void 0!==U&&e instanceof U?String(e):void 0,$=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator];class M{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}let V=e=>e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],q=async e=>{let t=await J(e.body);return P(t,e)},J=async e=>{let t=new R;return await Promise.all(Object.entries(e||{}).map(([e,r])=>z(t,e,r))),t},z=async(e,t,r)=>{if(void 0!==r){if(null==r)throw TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)e.append(t,String(r));else if(j(r)){let n=await D(r);e.append(t,n)}else if(Array.isArray(r))await Promise.all(r.map(r=>z(e,t+"[]",r)));else if("object"==typeof r)await Promise.all(Object.entries(r).map(([r,n])=>z(e,`${t}[${r}]`,n)));else throw TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var H=r(7133).lW,X=r(2601),K=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},G=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};async function Y(e){let{response:t}=e;if(e.options.stream)return new f(t,e.controller);let r=t.headers.get("content-type");if(null==r?void 0:r.includes("application/json")){let e=await t.json();return em("response",t.status,t.url,t.headers,e),e}let n=await t.text();return em("response",t.status,t.url,t.headers,n),n}class Z extends Promise{constructor(e,t=Y){super(e=>{e(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new Z(this.responsePromise,async t=>e(await this.parseResponse(t)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Q{constructor({baseURL:e,maxRetries:t,timeout:r=6e5,httpAgent:n,fetch:i}){this.baseURL=e,this.maxRetries=ed("maxRetries",null!=t?t:2),this.timeout=ed("timeout",r),this.httpAgent=n,this.fetch=null!=i?i:_}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...eu(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${eb()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(r=>({method:e,path:t,...r})))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if("string"==typeof e){if(void 0!==H)return H.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder){let t=new TextEncoder,r=t.encode(e);return r.length.toString()}}return null}buildRequest(e){var t,r,n,i,s,o;let{method:a,path:u,query:h,headers:l={}}=e,c=V(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,f=this.calculateContentLength(c),d=this.buildURL(u,h);"timeout"in e&&ed("timeout",e.timeout);let p=null!==(t=e.timeout)&&void 0!==t?t:this.timeout,y=null!==(n=null!==(r=e.httpAgent)&&void 0!==r?r:this.httpAgent)&&void 0!==n?n:k(d),g=p+1e3;"number"==typeof(null===(i=null==y?void 0:y.options)||void 0===i?void 0:i.timeout)&&g>(null!==(s=y.options.timeout)&&void 0!==s?s:0)&&(y.options.timeout=g),this.idempotencyHeader&&"get"!==a&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);let m={...f&&{"Content-Length":f},...this.defaultHeaders(e),...l};V(e.body)&&delete m["Content-Type"],Object.keys(m).forEach(e=>null===m[e]&&delete m[e]);let b={method:a,...c&&{body:c},headers:m,...y&&{agent:y},signal:null!==(o=e.signal)&&void 0!==o?o:null};return this.validateHeaders(m,l),{req:b,url:d,timeout:p}}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(e=>[...e])):{...e}:{}}makeStatusError(e,t,r,n){return y.generate(e,t,r,n)}request(e,t=null){return new Z(this.makeRequest(e,t))}async makeRequest(e,t){var r,n,i;let s=await e;null==t&&(t=null!==(r=s.maxRetries)&&void 0!==r?r:this.maxRetries);let{req:o,url:a,timeout:u}=this.buildRequest(s);if(await this.prepareRequest(o,{url:a,options:s}),em("request",a,s,o.headers),null===(n=s.signal)||void 0===n?void 0:n.aborted)throw new g;let h=new AbortController,l=await this.fetchWithTimeout(a,o,u,h).catch(ep);if(l instanceof Error){if(null===(i=s.signal)||void 0===i?void 0:i.aborted)throw new g;if(t)return this.retryRequest(s,t);if("AbortError"===l.name)throw new b;throw new m({cause:l})}let c=er(l.headers);if(!l.ok){if(t&&this.shouldRetry(l))return this.retryRequest(s,t,c);let e=await l.text().catch(()=>"Unknown"),r=eh(e),n=r?void 0:e;em("response",l.status,a,c,n);let i=this.makeStatusError(l.status,r,n,c);throw i}return{response:l,options:s,controller:h}}requestAPIList(e,t){let r=this.makeRequest(t,null);return new et(this,r,e)}buildURL(e,t){let r=new URL(ec(e)?e:this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),n=this.defaultQuery();return eg(n)||(t={...n,...t}),t&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw Error(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,r,n){let{signal:i,...s}=t||{};i&&i.addEventListener("abort",()=>n.abort());let o=setTimeout(()=>n.abort(),r);return this.getRequestClient().fetch(e,{signal:n.signal,...s}).finally(()=>{clearTimeout(o)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){let t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,r){var n;t-=1;let i=parseInt((null==r?void 0:r["retry-after"])||""),s=null!==(n=e.maxRetries)&&void 0!==n?n:this.maxRetries,o=1e3*this.calculateRetryTimeoutSeconds(t,i,s);return await ef(o),this.makeRequest(e,t)}calculateRetryTimeoutSeconds(e,t,r){return Number.isInteger(t)&&t<=60?t:Math.min(.5*Math.pow(r-e-1,2),2)+(Math.random()-.5)}getUserAgent(){return`${this.constructor.name}/JS ${l}`}}class ee{constructor(e,t,r,n){a.set(this,void 0),K(this,a,e,"f"),this.options=n,this.response=t,this.body=r}hasNextPage(){let e=this.getPaginatedItems();return!!e.length&&null!=this.nextPageInfo()}async getNextPage(){let e=this.nextPageInfo();if(!e)throw Error("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");let t={...this.options};if("params"in e)t.query={...t.query,...e.params};else if("url"in e){let r=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(let[t,n]of r)e.url.searchParams.set(t,n);t.query=void 0,t.path=e.url.toString()}return await G(this,a,"f").requestAPIList(this.constructor,t)}async *iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async *[(a=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}}class et extends Z{constructor(e,t,r){super(t,async t=>new r(e,t.response,await Y(t),t.options))}async *[Symbol.asyncIterator](){let e=await this;for await(let t of e)yield t}}let er=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){let r=t.toString();return e[r.toLowerCase()]||e[r]}}),en={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0},ei=e=>"object"==typeof e&&null!==e&&!eg(e)&&Object.keys(e).every(e=>Object.prototype.hasOwnProperty.call(en,e)),es=()=>{if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l,"X-Stainless-OS":ea(Deno.build.os),"X-Stainless-Arch":eo(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":X.version};if("[object process]"===Object.prototype.toString.call(void 0!==X?X:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l,"X-Stainless-OS":ea(X.platform),"X-Stainless-Arch":eo(X.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":X.version};let e=function(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:e,pattern:t}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let r=t.exec(navigator.userAgent);if(r){let t=r[1]||0,n=r[2]||0,i=r[3]||0;return{browser:e,version:`${t}.${n}.${i}`}}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},eo=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",ea=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown",eu=()=>null!=n?n:n=es(),eh=e=>{try{return JSON.parse(e)}catch(e){return}},el=RegExp("^(?:[a-z]+:)?//","i"),ec=e=>el.test(e),ef=e=>new Promise(t=>setTimeout(t,e)),ed=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw Error(`${e} must be an integer`);if(t<0)throw Error(`${e} must be a positive integer`);return t},ep=e=>e instanceof Error?e:Error(e),ey=e=>{var t,r,n,i;return void 0!==X?null!==(r=null===(t=X.env)||void 0===t?void 0:t[e])&&void 0!==r?r:void 0:"undefined"!=typeof Deno?null===(i=null===(n=Deno.env)||void 0===n?void 0:n.get)||void 0===i?void 0:i.call(n,e):void 0};function eg(e){if(!e)return!0;for(let t in e)return!1;return!0}function em(e,...t){void 0!==X&&"true"===X.env.DEBUG&&console.log(`OpenAI:DEBUG:${e}`,...t)}let eb=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),ew=()=>"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator;class ev extends ee{constructor(e,t,r,n){super(e,t,r,n),this.object=r.object,this.data=r.data}getPaginatedItems(){return this.data}nextPageParams(){return null}nextPageInfo(){return null}}class eE extends ee{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data}getPaginatedItems(){return this.data}nextPageParams(){let e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;let t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var e,t;if(!(null===(e=this.data)||void 0===e?void 0:e.length))return null;let r=null===(t=this.data[this.data.length-1])||void 0===t?void 0:t.id;return r?{params:{after:r}}:null}}class eA{constructor(e){this.client=e,this.get=e.get.bind(e),this.post=e.post.bind(e),this.patch=e.patch.bind(e),this.put=e.put.bind(e),this.delete=e.delete.bind(e),this.getAPIList=e.getAPIList.bind(e)}}class ex extends eA{create(e,t){return this.post("/audio/transcriptions",q({body:e,...t}))}}ex||(ex={});class eT extends eA{create(e,t){return this.post("/audio/translations",q({body:e,...t}))}}eT||(eT={});class eS extends eA{constructor(){super(...arguments),this.transcriptions=new ex(this.client),this.translations=new eT(this.client)}}(i=eS||(eS={})).Transcriptions=ex,i.Translations=eT;class eO extends eA{create(e,t){var r;return this.post("/chat/completions",{body:e,...t,stream:null!==(r=e.stream)&&void 0!==r&&r})}}eO||(eO={});class ek extends eA{constructor(){super(...arguments),this.completions=new eO(this.client)}}(ek||(ek={})).Completions=eO;class e_ extends eA{create(e,t){var r;return this.post("/completions",{body:e,...t,stream:null!==(r=e.stream)&&void 0!==r&&r})}}e_||(e_={});class eR extends eA{create(e,t){return this.post("/embeddings",{body:e,...t})}}eR||(eR={});class eI extends eA{create(e,t){return this.post("/edits",{body:e,...t})}}eI||(eI={});class eP extends eA{create(e,t){return this.post("/files",q({body:e,...t}))}retrieve(e,t){return this.get(`/files/${e}`,t)}list(e){return this.getAPIList("/files",eN,e)}del(e,t){return this.delete(`/files/${e}`,t)}retrieveContent(e,t){return this.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...null==t?void 0:t.headers}})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=18e5}={}){let n=new Set(["processed","error","deleted"]),i=Date.now(),s=await this.retrieve(e);for(;!s.status||!n.has(s.status);)if(await ef(t),s=await this.retrieve(e),Date.now()-i>r)throw new b({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return s}}class eN extends ev{}eP||(eP={});class eU extends eA{create(e,t){return this.post("/fine-tunes",{body:e,...t})}retrieve(e,t){return this.get(`/fine-tunes/${e}`,t)}list(e){return this.getAPIList("/fine-tunes",eC,e)}cancel(e,t){return this.post(`/fine-tunes/${e}/cancel`,t)}listEvents(e,t,r){var n;return this.get(`/fine-tunes/${e}/events`,{query:t,timeout:864e5,...r,stream:null!==(n=null==t?void 0:t.stream)&&void 0!==n&&n})}}class eC extends ev{}eU||(eU={});class eB extends eA{create(e,t){return this.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return ei(e)?this.list({},e):this.getAPIList("/fine_tuning/jobs",eL,{query:e,...t})}cancel(e,t){return this.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return ei(t)?this.listEvents(e,{},t):this.getAPIList(`/fine_tuning/jobs/${e}/events`,ej,{query:t,...r})}}class eL extends eE{}class ej extends eE{}eB||(eB={});class eD extends eA{constructor(){super(...arguments),this.jobs=new eB(this.client)}}(s=eD||(eD={})).Jobs=eB,s.FineTuningJobsPage=eL,s.FineTuningJobEventsPage=ej;class eW extends eA{createVariation(e,t){return this.post("/images/variations",q({body:e,...t}))}edit(e,t){return this.post("/images/edits",q({body:e,...t}))}generate(e,t){return this.post("/images/generations",{body:e,...t})}}eW||(eW={});class eF extends eA{retrieve(e,t){return this.get(`/models/${e}`,t)}list(e){return this.getAPIList("/models",e$,e)}del(e,t){return this.delete(`/models/${e}`,t)}}class e$ extends ev{}eF||(eF={});class eM extends eA{create(e,t){return this.post("/moderations",{body:e,...t})}}eM||(eM={});class eV extends Q{constructor(e){var t,r,n,{apiKey:i=ey("OPENAI_API_KEY"),organization:s=null!==(t=ey("OPENAI_ORG_ID"))&&void 0!==t?t:null,...o}=void 0===e?{}:e;if(void 0===i)throw Error("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'my apiKey' }).");let a={apiKey:i,organization:s,...o,baseURL:null!==(r=o.baseURL)&&void 0!==r?r:"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&ew())throw Error("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:a.baseURL,timeout:null!==(n=a.timeout)&&void 0!==n?n:6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new e_(this),this.chat=new ek(this),this.edits=new eI(this),this.embeddings=new eR(this),this.files=new eP(this),this.images=new eW(this),this.audio=new eS(this),this.moderations=new eM(this),this.models=new eF(this),this.fineTuning=new eD(this),this.fineTunes=new eU(this),this._options=a,this.apiKey=i,this.organization=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}u=eV,eV.OpenAI=u,eV.APIError=y,eV.APIConnectionError=m,eV.APIConnectionTimeoutError=b,eV.APIUserAbortError=g,eV.NotFoundError=A,eV.ConflictError=x,eV.RateLimitError=S,eV.BadRequestError=w,eV.AuthenticationError=v,eV.InternalServerError=O,eV.PermissionDeniedError=E,eV.UnprocessableEntityError=T;let{APIError:eq,APIConnectionError:eJ,APIConnectionTimeoutError:ez,APIUserAbortError:eH,NotFoundError:eX,ConflictError:eK,RateLimitError:eG,BadRequestError:eY,AuthenticationError:eZ,InternalServerError:eQ,PermissionDeniedError:e0,UnprocessableEntityError:e1}=h;(o=eV||(eV={})).toFile=D,o.fileFromPath=N,o.Page=ev,o.CursorPage=eE,o.Completions=e_,o.Chat=ek,o.Edits=eI,o.Embeddings=eR,o.Files=eP,o.FileObjectsPage=eN,o.Images=eW,o.Audio=eS,o.Moderations=eM,o.Models=eF,o.ModelsPage=e$,o.FineTuning=eD,o.FineTunes=eU,o.FineTunesPage=eC;var e2=eV}}]);